"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.lambdaFunctionHandler = void 0;
const field_parser_1 = require("../field-parser");
const lambdaFunctionHandler = (_, resource, cfnContext) => {
    var _a, _b;
    const name = field_parser_1.parseValue(resource.Properties.FunctionName, cfnContext);
    const handler = field_parser_1.parseValue(resource.Properties.Handler, cfnContext);
    const cfnEnvVars = ((_b = (_a = resource === null || resource === void 0 ? void 0 : resource.Properties) === null || _a === void 0 ? void 0 : _a.Environment) === null || _b === void 0 ? void 0 : _b.Variables) || {};
    const environment = Object.entries(cfnEnvVars).reduce((acc, [varName, varVal]) => ({
        ...acc,
        [varName]: field_parser_1.parseValue(varVal, cfnContext),
    }), {});
    return {
        cfnExposedAttributes: { Arn: 'arn' },
        arn: `arn:aws:lambda:{aws-region}:{aws-account-number}:function/${name}/LATEST`,
        ref: `arn:aws:lambda:{aws-region}:{aws-account-number}:function/${name}/LATEST`,
        name,
        handler,
        environment,
    };
};
exports.lambdaFunctionHandler = lambdaFunctionHandler;
//# sourceMappingURL=lambda.js.map