{"version":3,"file":"consolidate-apigw-policies.js","sourceRoot":"","sources":["../../src/utils/consolidate-apigw-policies.ts"],"names":[],"mappings":"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"}